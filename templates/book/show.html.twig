{% extends 'base.html.twig' %}

{% block title %}{{ book.title }}{% endblock %}

{% block seo %}
    <meta name="robots" content="noindex, nofollow">
{% endblock %}

{% block body_id 'book_show' %}

 {% block javascripts %}
     <script>
       function deleteBookConfirmation () {
         Swal.fire({
           title: 'Sûre ?',
           text: 'Vous allez retirer ce livre de la bibliotheque',
           showCancelButton: true,
           cancelButtonText: 'Annuler',
           confirmButtonColor: '#2196f3',
           cancelButtonColor: '#d33',
           confirmButtonText: 'Oui, retirer !'
         });
       }
     </script>
 {% endblock %}

{% block main %}

    <div class="container book-show-container">
        <div class="row">
            <div class="col-md-4">
                <img src="{% if book.coverFile %}{{ asset(book.coverFile) }}{% endif %}"
                     alt="Image du livre {{ book.title }}" class="book-show-img" width="350">
                {% if book.isReserved == true %}
                    <span class="mediatheque-book-not-available"
                          style="position:relative; bottom: 25px;left: 15px;color: #fff;background: red; border-radius: 15px">
                        Indisponible
                    </span>
                {% endif %}
            </div>

            <div class="col-md-8">
                <h3 class="mb-3">{{ book.title | capitalize }}</h3>

                <p>{{ book.description }}</p>

                <p><strong>Autheur</strong> : {{ book.author }}</p>
                <p><strong>Date de publication </strong>: {{ book.isReleasedAt | date('d-m-Y') }}</p>

                <div class="mediatheque-borrow-btn">
                    {% if book.isReserved == false %}
                        <a class="btn btn-primary js-reserve-book"
                           href="{{ path('app_borrow_new', {'bookId': book.id}) }}">Réserver</a>
                    {% endif %}
                </div>
            </div>

            <div class="container">
                <div class="row mediatheque-book-action-links">
                    <a href="{{ path('app_catalog') }}">Retour à la médiatheque</a>

                    {% if is_granted('ROLE_ADMIN') %}
                        <a href="{{ path('app_book_edit', {'slug': book.slug}) }}">Modifier</a>

                        {% if book.isReserved == false %}
                            {{ include('book/_delete_form.html.twig') }}
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
